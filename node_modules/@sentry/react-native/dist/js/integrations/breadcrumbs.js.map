{"version":3,"file":"breadcrumbs.js","sourceRoot":"","sources":["../../../src/js/integrations/breadcrumbs.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,sBAAsB,IAAI,6BAA6B,EAAE,MAAM,iBAAiB,CAAC;AAE1F,OAAO,EAAE,KAAK,EAAE,MAAM,sBAAsB,CAAC;AAqD7C,MAAM,CAAC,MAAM,sBAAsB,GAAG,CAAC,UAAuC,EAAE,EAAe,EAAE;;IAC/F,MAAM,QAAQ;QACZ,4GAA4G;QAC5G,2GAA2G;QAC3G,yCAAyC;QACzC,GAAG,EAAE,IAAI,EACT,OAAO,EAAE,IAAI,EACb,MAAM,EAAE,IAAI,IACT,OAAO,KACV,KAAK,EAAE,MAAA,OAAO,CAAC,KAAK,mCAAI,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC,EAChD,GAAG,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC,MAAA,OAAO,CAAC,GAAG,mCAAI,IAAI,CAAC,CAAC,CAAC,KAAK,EAC1C,OAAO,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC,MAAA,OAAO,CAAC,OAAO,mCAAI,IAAI,CAAC,CAAC,CAAC,KAAK,GACnD,CAAC;IAEF,kFAAkF;IAClF,8FAA8F;IAC9F,iJAAiJ;IACjJ,OAAO,6BAA6B,CAAC,QAAQ,CAAC,CAAC;AACjD,CAAC,CAAC","sourcesContent":["import { breadcrumbsIntegration as browserBreadcrumbsIntegration } from '@sentry/browser';\nimport type { Integration } from '@sentry/core';\nimport { isWeb } from '../utils/environment';\n\ninterface BreadcrumbsOptions {\n  /**\n   * Log calls to console.log, console.debug, and so on.\n   */\n  console: boolean;\n\n  /**\n   * Log all click and keypress events.\n   *\n   * Only available on web. In React Native this is a no-op.\n   */\n  dom:\n    | boolean\n    | {\n        serializeAttribute?: string | string[];\n        maxStringLength?: number;\n      };\n\n  /**\n   * Log HTTP requests done with the global Fetch API.\n   *\n   * Disabled by default in React Native because fetch is built on XMLHttpRequest.\n   * Enabled by default on web.\n   *\n   * Setting `fetch: true` and `xhr: true` will cause duplicates in React Native.\n   */\n  fetch: boolean;\n\n  /**\n   * Log calls to history.pushState and related APIs.\n   *\n   * Only available on web. In React Native this is a no-op.\n   */\n  history: boolean;\n\n  /**\n   * Log whenever we send an event to the server.\n   */\n  sentry: boolean;\n\n  /**\n   * Log HTTP requests done with the XHR API.\n   *\n   * Because React Native global fetch is built on XMLHttpRequest,\n   * this will also log `fetch` network requests.\n   *\n   * Setting `fetch: true` and `xhr: true` will cause duplicates in React Native.\n   */\n  xhr: boolean;\n}\n\nexport const breadcrumbsIntegration = (options: Partial<BreadcrumbsOptions> = {}): Integration => {\n  const _options: BreadcrumbsOptions = {\n    // FIXME: In mobile environment XHR is implemented by native APIs, which are instrumented by the Native SDK.\n    // This will cause duplicates in React Native. On iOS `NSURLSession` is instrumented by default. On Android\n    // `OkHttp` is only instrumented by SAGP.\n    xhr: true,\n    console: true,\n    sentry: true,\n    ...options,\n    fetch: options.fetch ?? (isWeb() ? true : false),\n    dom: isWeb() ? options.dom ?? true : false,\n    history: isWeb() ? options.history ?? true : false,\n  };\n\n  // Historically we had very little issue using the browser breadcrumbs integration\n  // and thus we don't cherry pick the implementation like for example the Sentry Deno SDK does.\n  // https://github.com/getsentry/sentry-javascript/blob/d007407c2e51d93d6d3933f9dea1e03ff3f4a4ab/packages/deno/src/integrations/breadcrumbs.ts#L34\n  return browserBreadcrumbsIntegration(_options);\n};\n"]}